server:
  port: 16350

# PostgreSQL Database (for agents, settings, trades)
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/lunchbot
    username: lunchbotuser
    password: ENC(9GDI62q7tkjCK3Dk7llB2qd8u4kwN5sLWTCGjxONfDuzR1gcPVwyUA==)
    driver-class-name: org.postgresql.Driver
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
    show-sql: false

# Jasypt encryption configuration
jasypt:
  encryptor:
    algorithm: PBEWithMD5AndDES
    iv-generator-classname: org.jasypt.iv.NoIvGenerator

# Actuator configuration
management:
  endpoints:
    web:
      exposure:
        include: health
  endpoint:
    health:
      show-details: when-authorized

trading:
  # Trading window: 11:30 - 13:00 Taipei time
  window:
    start: "11:30"
    end: "13:00"
  
  # Stock and Risk settings are now stored in database
  # See StockSettings and RiskSettings entities
  # Default values are set by StockSettingsService and RiskSettingsService
  
  # Python bridge
  bridge:
    url: "http://localhost:8888"
    timeout-ms: 3000

# Telegram bot configuration (encrypted with Jasypt)
telegram:
  bot-token: "ENC(zhPmZqsWyPszF/4uiTNaqVhibSgO7LgXcAvITv3vL2KZt5R9BG+F9c6yOjy8lsjt7VmbKMRHt+w=)"
  chat-id: "ENC(OWDtjgnAjrtdlx+XBMO/neVd30Wc8nX7)"
  enabled: true

# Shioaji credentials (encrypted with Jasypt)
shioaji:
  stock:
    api-key: "ENC(V+vPahEF6gsi0hxvenBkxkLZvsfK+muifnbG5sRwqgvkCKJKehsLo29pSWGytjX8EPLvAIW+n3Q=)"
    secret-key: "ENC(3gPVavnlQYhDfpoI5hCPLdETkJxwGdxgtcoBXwYEbG5MojYD6HsiW16r7WMo23q2rOytquA8u80=)"
  future:
    api-key: "ENC(+jmihAk/Wa8e0EES6j05sPGjQ17usvEx0Qb+BI9cHfALLbhofOH5qFVrg+SVdUsnXkFab491S58=)"
    secret-key: "ENC(RRZ8DTuV8oxlzoUhA1TC5V62JlHKkt42AMu23W+FJ04fl+5ZERHfDOgy+TeZzNEQQOThDseYALw=)"
  ca-path: "Sinopac.pfx"
  ca-password: "ENC(T/0mMsexOIlSp3CqMdtqENRugQ0gezU7)"
  person-id: "ENC(fNJEeUmwdyu2PCWL6YfIwbpLYY3XKmmI)"
  # Set to true for paper trading - now managed dynamically via database
  # simulation: false

# Ollama configuration
ollama:
  url: "http://localhost:11434"
  model: "llama3.1:8b-instruct-q5_K_M"

logging:
  level:
    root: INFO
    '[tw.gc.mtxfbot]': DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  logback:
    rollingpolicy:
      file-name-pattern: "logs/mtxf-bot-%d{yyyy-MM-dd}.%i.log"
      max-file-size: 10MB
      max-history: 30
      total-size-cap: 500MB
  file:
    name: logs/mtxf-bot.log

# Earnings blackout refresh configuration
earnings:
  refresh:
    enabled: true
